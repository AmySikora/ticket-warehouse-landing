<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Ticket VeriGuard ‚Äî How It Works</title>
  <meta name="description" content="A plain-English walkthrough of what Ticket VeriGuard does and how the prototype works."/>
  <link rel="icon" href="./favicon_logo.png" type="image/png"/>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body class="page-prototype">
 
  <header class="nav">
    <div class="nav--brand">
      <a href="index.html" class="logo-bay">
        <img src="./favicon_logo.png" alt="Ticket VeriGuard" class="logo-img">
      </a>
  
      <button class="nav-toggle" id="navToggle" aria-expanded="false" aria-controls="primary-nav">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </button>
  
      <nav class="topnav" id="primary-nav">
        <a href="index.html"      class="nav-link">Home</a>
        <a href="brokers.html"    class="nav-link">Brokers</a>
        <a href="prototype.html"  class="nav-link nav-active btn-primary">How it works</a>
        <a href="https://amysikora.github.io/tvg-demo/index.html"
           class="nav-link" target="_blank" rel="noopener">Try Live Demo</a>
           <a href="./index.html#contact" class="nav-link">Contact Us</a>
    </div>
  </header>
  
  

  <main>
    <section class="section">
      <div class="container">
        <h1>How Ticket VeriGuard works</h1>
        <p class="lead">Connect where you sell, register your tickets once, and let instant updates keep every listing accurate. This page shows the nuts and bolts.</p>
        <div class="cta-row">
          <a class="btn" href="./index.html#contact">Contact us</a>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="container">
        <h2>The flow at a glance</h2>
        <div class="grid-2">
          <div class="card">
            <h3>1) Link accounts</h3>
            <p class="muted">Choose your marketplaces or point of sale and connect them. You control what gets shared.</p>
            <h3 class="mt-8">2) Register tickets once</h3>
            <p class="muted">Add seat details in one place. We keep them tidy and ready for fast updates.</p>
          </div>
          <div class="card">
            <h3>3) Real-time updates</h3>
            <p class="muted">When a seat sells on any connected site, we flag it and send updates to the rest in a blink.</p>
            <h3 class="mt-8">4) Clean checkouts</h3>
            <p class="muted">Fans see what is actually available. You skip double sales, refunds, and support churn.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- MetaSearch demo -->
    <section class="section">
      <div class="container">
        <h2>Find your tickets across secondary markets</h2>
        <div class="card search-card">
          <form id="metaSearch" class="ms-form" novalidate>
            <label class="ms-label">
              <span class="ms-label-text">Event (required)</span>
              <div class="ms-input-wrap">
                <span aria-hidden="true">üéüÔ∏è</span>
                <input type="text" id="ms-event" name="event" placeholder="Taylor Swift 12/14/2025" autocomplete="off" required class="ms-input"/>
              </div>
            </label>

            <div class="ms-two">
              <label class="ms-label">
                <span class="ms-label-text">City (optional)</span>
                <div class="ms-input-wrap">
                  <span aria-hidden="true">üìç</span>
                  <input type="text" id="ms-city" name="city" placeholder="Nashville" autocomplete="off" class="ms-input"/>
                </div>
              </label>

              <label class="ms-label">
                <span class="ms-label-text">Section/Row/Seat (optional)</span>
                <div class="ms-input-wrap">
                  <span aria-hidden="true">ü™ë</span>
                  <input type="text" id="ms-srs" name="srs" placeholder="Section 110 Row F Seat 12" autocomplete="off" class="ms-input"/>
                </div>
              </label>
            </div>

            <fieldset class="ms-sites">
              <legend class="ms-legend">Search these sites</legend>
              <div class="ms-site-grid">
                <label class="pill-check"><input type="checkbox" id="site-google" checked><span>Google (exact + filters)</span></label>
                <label class="pill-check"><input type="checkbox" id="site-seatgeek" checked><span>SeatGeek</span></label>
                <label class="pill-check"><input type="checkbox" id="site-vivid" checked><span>Vivid Seats</span></label>
                <label class="pill-check"><input type="checkbox" id="site-stubhub" checked><span>StubHub</span></label>
                <label class="pill-check"><input type="checkbox" id="site-ticketmaster" checked><span>Ticketmaster</span></label>
              </div>
            </fieldset>

            <div class="ms-actions">
              <button type="submit" class="btn primary">Open results</button>
              <button type="button" id="ms-copy" class="btn">Copy search</button>
              <button type="button" id="ms-reset" class="btn">Reset</button>
              <span class="ms-hint muted">Tip: press Enter to open all selected.</span>
            </div>
          </form>

          <div id="ms-preview">
            <div class="muted mt-6">Preview links:</div>
            <div id="ms-links" class="ms-links"></div>
          </div>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="container">
        <h2>‚ÄúTwo people tried to buy the same ticket,‚Äù what happens?</h2>
        <div class="card">
          <p>Without coordination, both checkouts might succeed. With Ticket VeriGuard, the first confirmed buyer wins. The moment that happens, we send a webhook <span class="kbd">POST</span> to the other marketplaces saying the ticket is sold. Their pages update, and the second buyer sees it before paying. No refund and no angry emails.</p>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="container">
        <h2>Prototype: what the requests look like</h2>
        <div class="card mb-10">
          <h3>Add a ticket</h3>
<pre><code>POST /api/tickets
Authorization: Bearer &lt;YOUR_API_KEY&gt;

{
  "ticket_id": "A1-ROW3-12",
  "event": "RockFest 2025",
  "face_value": 120.00,
  "currency": "USD",
  "status": "available"
}</code></pre>
        </div>
        <div class="card mb-10">
          <h3>Mark as sold</h3>
<pre><code>POST /api/tickets/A1-ROW3-12/sold
Authorization: Bearer &lt;YOUR_API_KEY&gt;

{
  "marketplace": "ExampleMarket",
  "order_id": "ORD-983221"
}</code></pre>
          <p class="muted mt-6">We send a webhook (POST to <span class="kbd">/webhooks/tickets</span>) with <span class="kbd">{"ticket_id":"A1-ROW3-12","status":"sold"}</span>.</p>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="container">
        <h2>Quick FAQ</h2>
        <div class="grid-2">
          <div class="card"><h3>Do I need to change all my systems?</h3><p class="muted">No. Start by registering tickets and listening for webhooks. Integrate deeper over time.</p></div>
          <div class="card"><h3>How fast are updates?</h3><p class="muted">Usually in milliseconds. Fast enough to catch near-simultaneous checkouts.</p></div>
          <div class="card"><h3>What if a marketplace is offline?</h3><p class="muted">We queue notifications and retry. Your source of truth stays correct, and late systems catch up.</p></div>
          <div class="card"><h3>Can I try a sandbox?</h3><p class="muted">Yes. Email <a href="mailto:hello@ticketveriguard.com">hello@ticketveriguard.com</a> and we‚Äôll set you up.</p></div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container footer-bar">
      <div class="muted">¬© <span id="y"></span> Ticket VeriGuard</div>
      <div class="muted">
        <a class="muted" href="#">Terms</a> ¬∑ <a class="muted" href="#">Privacy</a> ¬∑ <a class="muted" href="#">Status</a>
      </div>
    </div>
  </footer>
  <script>
    const y = document.getElementById('y');
    if (y) y.textContent = new Date().getFullYear();

    // mobile nav toggle
    (function(){
      const hdr = document.querySelector('header');
      const btn = document.querySelector('.nav-toggle');
      const nav = document.getElementById('primary-nav');
      if(!btn || !hdr || !nav) return;
      const toggle = () => {
        const isOpen = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!isOpen));
        hdr.classList.toggle('nav-open', !isOpen);
      };
      btn.addEventListener('click', toggle);
      nav.querySelectorAll('a').forEach(a => a.addEventListener('click', () => {
        btn.setAttribute('aria-expanded','false'); hdr.classList.remove('nav-open');
      }));
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          btn.setAttribute('aria-expanded','false');
          hdr.classList.remove('nav-open');
        }
      });
    })();

    // MetaSearch logic (unchanged)
    (function(){
      const $ = (s, r=document) => r.querySelector(s);
      const $$ = (s, r=document) => [...r.querySelectorAll(s)];

      const f = $('#metaSearch'); if(!f) return;

      const iEvent = $('#ms-event'), iCity = $('#ms-city'), iSRS = $('#ms-srs');
      const linksWrap = $('#ms-links');

      const sites = {
        google:       $('#site-google'),
        seatgeek:     $('#site-seatgeek'),
        vivid:        $('#site-vivid'),
        stubhub:      $('#site-stubhub'),
        ticketmaster: $('#site-ticketmaster'),
      };

      const buildQuery = () => [iEvent.value.trim(), iCity.value.trim(), iSRS.value.trim()].filter(Boolean).join(' ').replace(/\s+/g,' ').trim();
      const enc = (s) => encodeURIComponent(s);

      function urlMap(q){
        const e = enc(q);
        return {
          google:       `https://www.google.com/search?q="%22${e}%22"+site%3Aviagogo.com+OR+site%3Astubhub.com+OR+site%3Avividseats.com+OR+site%3Aseatgeek.com`,
          seatgeek:     `https://seatgeek.com/search?search=${e}`,
          vivid:        `https://www.vividseats.com/concerts/${e}`,
          stubhub:      `https://www.stubhub.com/find?q=${e}`,
          ticketmaster: `https://www.ticketmaster.com/search?q=${e}`,
        };
      }

      function renderPreview(){
        const q = buildQuery();
        linksWrap.innerHTML = '';
        if(!q){ return; }
        const urls = urlMap(q);
        for(const [key, el] of Object.entries(sites)){
          if(!el.checked) continue;
          const a = document.createElement('a');
          a.className = 'btn'; a.target = '_blank'; a.rel = 'noopener';
          a.href = urls[key];
          a.textContent = ({google:'Google',seatgeek:'SeatGeek',vivid:'Vivid Seats',stubhub:'StubHub',ticketmaster:'Ticketmaster'})[key] || key;
          linksWrap.appendChild(a);
        }
      }

      let t=null; const debounced = (fn)=>{ clearTimeout(t); t=setTimeout(fn,200); };

      const KEY='tvg.metaSearch';
      function loadSaved(){
        try{
          const raw = localStorage.getItem(KEY); if(!raw) return;
          const s = JSON.parse(raw);
          iEvent.value = s.event || ''; iCity.value = s.city || ''; iSRS.value = s.srs || '';
          for(const k of Object.keys(sites)){ if(typeof s.sites?.[k] === 'boolean') sites[k].checked = s.sites[k]; }
        }catch{}
      }
      function saveNow(){
        try{
          const data = { event:iEvent.value, city:iCity.value, srs:iSRS.value, sites:Object.fromEntries(Object.entries(sites).map(([k,el])=>[k,el.checked])) };
          localStorage.setItem(KEY, JSON.stringify(data));
        }catch{}
      }

      f.addEventListener('input', ()=>{ debounced(()=>{ saveNow(); renderPreview(); }); });
      Object.values(sites).forEach(el => el.addEventListener('change', ()=>{ saveNow(); renderPreview(); }));

      f.addEventListener('submit', (e)=>{
        e.preventDefault();
        const q = buildQuery(); if(!q){ iEvent.focus(); return; }
        const urls = urlMap(q);
        Object.entries(sites).filter(([_,el])=>el.checked).forEach(([k])=> window.open(urls[k], '_blank', 'noopener'));
      });

      $('#ms-copy').addEventListener('click', async ()=>{
        const q = buildQuery(); if(!q) return;
        try{ await navigator.clipboard.writeText(q); }catch{}
      });

      $('#ms-reset').addEventListener('click', ()=>{
        iEvent.value=''; iCity.value=''; iSRS.value='';
        Object.values(sites).forEach(el => el.checked = true);
        saveNow(); renderPreview(); iEvent.focus();
      });

      loadSaved(); renderPreview();
    })();
  </script>
</body>
</html>